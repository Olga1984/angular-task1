'use strict';

let path = require('path');
let Sassaby = require('sassaby');

describe('mixin wk-make-columns', () => {
    let file = path.resolve('src/wk-components/grid/_grid.mixins.scss');
    let sb = new Sassaby(file, {
        variables: {
            'wk-global-columns': 12,
        },
        dependencies: [
            'node_modules/susy/sass/_susy.scss',
        ]
    });

    let mixin = sb.standaloneMixin('wk-make-columns').called();

    describe('creates selector', () =>  {
        it("div[class^='wk-col']:last-child", () => mixin
            .createsSelector("div[class^='wk-col']:last-child")
        );

        Array(12)
            .fill(0)
            .forEach((n, i) => it('.wk-col-' + (i + 1), () => mixin.createsSelector('.wk-col-' + (i + 1))));
    });

    describe('calls mixin', () =>  {
        it('last from susy', () => mixin.calls('last'));
        it('span from susy', () => mixin.calls('span(1 of 12)'));
    });
});
