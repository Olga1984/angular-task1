////
/// @group wk-css.components.forms
/// @author [GPO](https://gpo.wolterskluwer.com/)
/// @since 0.5.0
/// @access public
////

@import 'forms.variables';

@include wk-exports('forms') {

    %scss-deps-forms {
        components: wk-component-dependencies(inputs);
        utils: wk-utils-dependencies(
            function wk-primary-color,
            mixin container,
            mixin wk-clearfix,
            mixin wk-transition,
            variable wk-font-stacks,
            variable wk-font-scale,
            variable wk-font-weight,
            variable wk-mobile-max-breakpoint,
            variable wk-target-tablet-desktop
        );
    }

    fieldset[disabled] {
        //Note: not 'radio' && not 'checkbox' for specificity
        input:not([type='radio']):not([type='checkbox']),
        input[type='radio'],
        input[type='checkbox'],
        textarea,
        select,
        .wk-textarea,
        .wk-input {
            background-color: $wk-input-disabled-background-color;
        }

        //Note: not 'radio' && not 'checkbox' for specificity
        input:not([type='radio']):not([type='checkbox']),
        input[type='radio'],
        input[type='checkbox'],
        textarea,
        select,
        .wk-textarea,
        .wk-input,
        .wk-checkbox-field,
        .wk-radio-field {
            color: $wk-input-disabled-color;
            cursor: not-allowed;
        }
    }

    label {
        font-weight: map-get($wk-font-weight, regular);
    }

    .wk-field-item {
        font-family: map-get($wk-font-stacks, 'global-sans');
        margin-bottom: wk-rem(16px);

        textarea,
        input:not([type='radio']):not([type='checkbox']), //TODO use @include wk-inputs
        .wk-textarea,
        .wk-select-field,
        .wk-radio-field,
        .wk-checkbox-field,
        .wk-input {
            font-weight: map-get($wk-font-weight, light);
            margin-bottom: wk-rem(3px); //provides space between the error message below
        }

        .wk-field-header {
            font-weight: map-get($wk-font-weight, regular);
            margin-bottom: wk-rem(3px);

            > .wk-field-tip {
                color: $wk-field-tip-color;
                float: right;
                font-size: map-get($wk-font-scale, smaller);
                font-style: italic;
                margin-left: wk-rem(6px);
                margin-top: .1em; //em on purpose
            }
        }

        &.wk-field-has-error {
            textarea,
            input:not([type='radio']):not([type='checkbox']), //TODO use @include wk-inputs
            .wk-select-field > select,
            .wk-textarea,
            .wk-input {
                border-color: $wk-field-error-color;
                color: $wk-field-error-color;
            }

            .wk-field-error {
                visibility: visible;
            }

            .wk-field-has-icon .wk-field-icon {
                color: $wk-field-icon-error-color;
            }
        }
    }

    .wk-field-has-icon {
        position: $wk-field-has-icon-position;

        @include wk-inputs {
            padding-right: $wk-field-has-icon-right-padding;
        }

        .wk-field-icon {
            background-color: $wk-field-icon-background-color;
            height: 100%;
            padding: $wk-field-icon-padding; // overwrites button element style
            position: $wk-field-icon-position;
            right: $wk-field-icon-position-right;
            top: $wk-field-icon-position-top;
            width: $wk-field-icon-width; // overwrites button element style
            z-index: $wk-field-icon-z-index;

            [wk-icon],
            [class*=wk-icon] {
                @include wk-transition(color);

                color: $wk-field-icon-color;
                font-size: $wk-field-icon-font-size;
            }

            &:hover {
                background-color: $wk-field-icon-hover-background-color; // overwrites button element style
            }

            &.wk-field-icon-button {

                &:hover {
                    [wk-icon],
                    [class*=wk-icon] {
                        color: $wk-field-icon-hover-color;
                    }
                }

                &:focus {
                    [wk-icon],
                    [class*=wk-icon] {
                        color: $wk-field-icon-focus-color;
                    }
                }
            }
        }
    }

    .wk-field-error {
        color: $wk-field-error-color;
        font-size: map-get($wk-font-scale, smaller);
        font-style: italic;
        visibility: hidden;

        &::after {
            content: '.';
            visibility: hidden;
        }
    }
}
